(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{128:function(e,t,a){e.exports=a(160)},133:function(e,t,a){},135:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},136:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),c=(a(133),a(79)),l=a.n(c),u=a(102),s=a(9),m=a(36),d=(a(135),a(136),a(200)),p=a(199),f=a(187),h=a(189),g=a(191),y=a(60),v=a(192),b=a(7),E=a.n(b),k=a(21),j=Object(f.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var x=Object(k.f)((function(e){var t=r.a.useContext(he),a=Object(s.a)(t,2),n=a[0],o=a[1],i=j(),c=r.a.useContext(ge),l=Object(s.a)(c,2),u=(l[0],l[1]);return r.a.createElement("div",{className:i.root},r.a.createElement(h.a,{position:"static"},r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"h6",className:i.title},"Ruby garage"),r.a.createElement(v.a,{color:"inherit",onClick:function(){var e=[];E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",E.a.post("http://127.0.0.1:8000/api/v1/project/",{name:"New Project"}).then((function(e){return e.data})).then((function(t){e=[].concat(Object(m.a)(n),[t]),o({type:"create_project",payload:{value:e}})}))}},"Add Project"),r.a.createElement(v.a,{color:"inherit",onClick:function(){localStorage.removeItem("token"),u({is_login:!1,username:""}),e.history.push("/")}},"Logout"))))})),C=a(162),_=a(198),w=a(72),O=a.n(w),S=a(74),I=a.n(S),N=a(194),T=a(203),W=a(73),A=a.n(W),P=Object(f.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function D(e){var t=e.name,a=e.id,n=r.a.useContext(he),o=Object(s.a)(n,2),i=o[0],c=o[1],l=r.a.useState(!1),u=Object(s.a)(l,2),m=u[0],d=u[1],p=r.a.useState(t),f=Object(s.a)(p,2),v=f[0],b=f[1],k=P();function j(e){return e?"block":"none"}var x=function(e){"Enter"!==e.key&&"click"!==e||(d(!m),E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",E.a.patch("http://127.0.0.1:8000/api/v1/project/".concat(a,"/"),{name:v}).then((function(e){return e.data})).then((function(e){var t=i.map((function(e){return e.id===a&&(e.name=v),e}));c({type:"update_project_by_id",payload:{value:t}})})))};return r.a.createElement("div",{className:k.root},r.a.createElement(h.a,{position:"static",display:"none",justify:"space-between"},r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"h6",className:k.title,style:{display:j(!m)}},v),r.a.createElement(T.a,{className:k.title,id:"outlined-basic-".concat(a),variant:"outlined",style:{display:j(m)},value:v,error:0===v.length,onChange:function(e){return b(e.target.value)},onKeyPress:function(e){return x(e)}}),r.a.createElement(N.a,{className:k.menuButton,color:"inherit","aria-label":"menu",style:{display:j(!m)},edge:"end",onClick:function(e){d(!m)}},r.a.createElement(O.a,null)),r.a.createElement(N.a,{className:k.menuButton,color:"inherit","aria-label":"menu",style:{display:j(m)},edge:"end",onClick:function(){return x("click")},align:"right",disabled:0===v.trim().length},r.a.createElement(A.a,null)),r.a.createElement(N.a,{className:k.menuButton,color:"inherit","aria-label":"menu",edge:"end",onClick:function(){E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",E.a.delete("http://127.0.0.1:8000/api/v1/project/".concat(a,"/")).then((function(e){return e.data})).then((function(e){var t=i.filter((function(e){return e.id!==a}));c({type:"remove_project_by_id",payload:{value:t}})})).catch((function(e){console.error("handleClickRemove:: Project %{projectName} do not removed.")}))},align:"right"},r.a.createElement(I.a,null)))))}var B=a(76),J=a(104),R=a.n(J),z=Object(f.a)((function(e){return{root:{flexGrow:1,backgroundColor:B.a[400]},menuButton:{marginRight:e.spacing(2)},textField:{flexGrow:1}}}));function G(e){var t=e.id_proj,a=r.a.useContext(he),n=Object(s.a)(a,2),o=n[0],i=n[1],c=r.a.useState(""),l=Object(s.a)(c,2),u=l[0],m=l[1],d=z(),p=function(e){if("Enter"===e.key||"click"===e){var a=new Date;a.setDate(a.getDate()+3);var n={text:u,is_done:!1,priority:0,expiry_date:a.toISOString(),project_id:t};E.a.post("http://127.0.0.1:8000/api/v1/task/",n).then((function(e){return e.data})).then((function(e){var a=o.map((function(a){return a.id===t&&(a.tasks||(a.tasks=[]),a.tasks.push(e)),a}));i({type:"create_task",payload:{value:a}}),m("")}))}};return r.a.createElement("div",{className:d.root},r.a.createElement(h.a,{position:"static",className:d.root},r.a.createElement(g.a,null,r.a.createElement(T.a,{id:"outlined-basic",variant:"outlined",size:"small",value:u,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){return p(e)},className:d.textField,placeholder:"Input Title for new task"}),r.a.createElement(N.a,{className:d.menuButton,color:"inherit","aria-label":"menu",edge:"end",align:"right",onClick:function(){return p("click")},disabled:0===u.trim().length},r.a.createElement(R.a,null)))))}var F=a(193),U=a(59),q=a(195),K=a(196),L=a(197),M=a(206),V=a(16),$=a(202),H=a(107),Q=a(77),X=a(50),Y=Object(f.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},title:{flexGrow:1},check:{color:Q.a[400],"&$checked":{color:Q.a[600]},checked:{}}}}));function Z(e){var t=e.taskItem,a=e.index,n=r.a.useState(t),o=Object(s.a)(n,2),i=o[0],c=o[1],l=r.a.useContext(he),u=Object(s.a)(l,4),m=u[0],d=u[1],p=u[2],f=u[3],h=r.a.useState(""),g=Object(s.a)(h,2),y=g[0],v=g[1],b=r.a.useState(""),k=Object(s.a)(b,2),j=k[0],x=k[1],C=Y();function _(e){return e?"block":"none"}function w(e){f(i.id),x(i.expiry_date),v(i.text)}var S=function(e){"Enter"!==e.key&&"click"!==e||(f(""),0!==i.text.trim().length&&(y!==i.text||j!==i.expiry_date)?(E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",E.a.patch("http://127.0.0.1:8000/api/v1/task/".concat(i.id,"/"),i).then((function(e){return e.data})).then((function(e){var t=m.map((function(t){return t.tasks=t.tasks.map((function(t){return t.id===i.id?e:t})),t}));d({type:"update_task",payload:{value:t}})})),x(""),v("")):c(Object(U.a)({},i,{text:y})))},W=function(){E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",E.a.delete("http://127.0.0.1:8000/api/v1/task/".concat(i.id,"/")).then((function(e){return e.data})).then((function(e){var t=m.map((function(e){return e.tasks=e.tasks.filter((function(e){return e.id!==i.id})),e}));d({type:"remove_task",payload:{value:t}})})).catch((function(e){console.error("handleClickRemove:: Task %{task.text} do not removed.")}))},P="checkbox-list-label-".concat(i.id);return r.a.createElement(X.b,{draggableId:i.id+"",key:i.id,index:a},(function(e){return r.a.createElement(q.a,Object.assign({key:i.position,role:void 0,dense:!0,button:!0},e.draggableProps,e.dragHandleProps,{innerRef:e.innerRef}),r.a.createElement(K.a,null,r.a.createElement(M.a,{color:"default",className:C.check,edge:"start",checked:!0===i.is_done,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":P},onChange:function(e){!function(e){E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",E.a.patch("http://127.0.0.1:8000/api/v1/task/".concat(i.id,"/"),{is_done:e.target.checked}).then((function(e){return e.data})).then((function(e){c(e);var t=m.map((function(t){return t.tasks=t.tasks.map((function(t){return t.id===i.id?e:t})),t}));d({type:"update_task",payload:{value:t}})}))}(e)}})),r.a.createElement(L.a,{id:P,primary:i.text,style:{display:_(!(p===i.id))}}),r.a.createElement(L.a,{id:P,primary:new Date(i.expiry_date).toLocaleDateString("ru"),style:{display:_(!(p===i.id))},align:"right"}),r.a.createElement(T.a,{className:C.title,id:"outlined-basic-".concat(i.id),variant:"outlined",style:{display:_(p===i.id)},value:i.text,error:0===i.text.length,onChange:function(e){return c(Object(U.a)({},i,{text:e.target.value}))},onKeyPress:function(e){return S(e)}}),r.a.createElement(V.a,{utils:H.a},r.a.createElement($.a,{disableToolbar:!0,autoOk:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",value:new Date(i.expiry_date),onChange:function(e){return e instanceof Date&&!isNaN(e.valueOf())?c(Object(U.a)({},i,{expiry_date:e.toISOString()})):null},id:"date-picker-inline-".concat(i.id),label:"deadline",KeyboardButtonProps:{"aria-label":"change date"},style:{display:_(p===i.id)}})),r.a.createElement(N.a,{className:C.menuButton,color:"inherit","aria-label":"menu",style:{display:_(!(p===i.id))},edge:"end",onClick:w},r.a.createElement(O.a,null)),r.a.createElement(N.a,{className:C.menuButton,color:"inherit","aria-label":"menu",style:{display:_(p===i.id)},edge:"end",onClick:function(){return S("click")},disabled:0===i.text.trim().length},r.a.createElement(A.a,null)),r.a.createElement(N.a,{className:C.menuButton,color:"inherit","aria-label":"menu",edge:"end",onClick:W},r.a.createElement(I.a,null)))}))}var ee=Object(f.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper}}}));function te(e){var t=e.tasks,a=e.id,n=(e.index,ee());return r.a.createElement(X.c,{droppableId:a+""},(function(e){return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(F.a,Object.assign({innerRef:e.innerRef},e.droppableProps,{className:n.root}),t.map((function(e){return r.a.createElement(Z,{key:e.id,index:e.priority,taskItem:e})})),e.placeholder))}))}var ae=Object(f.a)((function(e){return{root:{flexGrow:1,width:"100%"},paper:{width:"100%",padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,"&:first-child":{marginTop:"2em"}}}}));function ne(){var e=ae(),t=r.a.useContext(he),a=Object(s.a)(t,1)[0];return r.a.createElement("div",{className:e.root},a.map((function(t,a){return r.a.createElement(_.a,{container:!0,spacing:3,key:t.id},r.a.createElement(_.a,{xs:12,direction:"column",ustify:"center",alignItems:"center",container:!0,item:!0},r.a.createElement(C.a,{className:e.paper},r.a.createElement(D,{name:t.name,id:t.id}),r.a.createElement(G,{id_proj:t.id}),r.a.createElement(te,{tasks:t.tasks,id:t.id,index:a}))))})))}var re=a(106),oe=a(207),ie=a(201),ce=a(204),le=a(75),ue=a.n(le),se=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),me=Object(k.f)((function(e){var t=r.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],i=r.a.useState(!1),c=Object(s.a)(i,2),l=c[0],u=c[1],m=r.a.useContext(ge),f=Object(s.a)(m,2),h=(f[0],f[1]),g=se();return r.a.createElement(p.a,{component:"main",maxWidth:"xs"},r.a.createElement(d.a,null),r.a.createElement("div",{className:g.paper},r.a.createElement(oe.a,{className:g.avatar},r.a.createElement(ue.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:g.form,noValidate:!0,onSubmit:function(t){return function(t){t.preventDefault();var a={username:n,password:l};E.a.post("http://localhost:8000/token-auth/",a,{"Content-Type":"application/json"}).then((function(e){return e.data})).then((function(t){localStorage.setItem("token",t.token),h({username:t.user.username,is_login:!0}),e.history.push("/")}))}(t)}},r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return o(e.target.value)}}),r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return u(e.target.value)}}),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:g.submit},"Sign In"),r.a.createElement(_.a,{container:!0},r.a.createElement(_.a,{item:!0,xs:!0}),r.a.createElement(_.a,{item:!0},r.a.createElement(ie.a,{href:"/signUp",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(ce.a,{mt:8}))})),de=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),pe=Object(k.f)((function(e){var t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],o=a[1],i=r.a.useState(""),c=Object(s.a)(i,2),l=c[0],u=c[1],m=r.a.useContext(ge),f=Object(s.a)(m,2),h=(f[0],f[1]),g=de();return r.a.createElement(p.a,{component:"main",maxWidth:"xs"},r.a.createElement(d.a,null),r.a.createElement("div",{className:g.paper},r.a.createElement(oe.a,{className:g.avatar},r.a.createElement(ue.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:g.form,noValidate:!0,onSubmit:function(t){return function(t){t.preventDefault();var a={username:n,password:l};E.a.post("http://localhost:8000/api/v1/users/",a,{"Content-Type":"application/json"}).then((function(e){return e.data})).then((function(t){localStorage.setItem("token",t.token),h({username:t.username,is_login:!0}),e.history.push("/signIn")}))}(t)}},r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoFocus:!0,onChange:function(e){return o(e.target.value)}}),r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return u(e.target.value)}}),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:g.submit},"Sign Up"),r.a.createElement(_.a,{container:!0},r.a.createElement(_.a,{item:!0,xs:!0}),r.a.createElement(_.a,{item:!0},r.a.createElement(ie.a,{href:"/signIn",variant:"body2"},"Do you have an account? Sign In"))))),r.a.createElement(ce.a,{mt:8}))}));function fe(e,t){switch(t.type){case"update_project_by_id":case"remove_project_by_id":case"create_project":case"create_task":case"update_task":case"remove_task":return Object(m.a)(t.payload.value);default:throw new Error}}var he=r.a.createContext(),ge=r.a.createContext();function ye(){var e=r.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],o=r.a.useState({username:"",is_login:!!localStorage.getItem("token")}),i=Object(s.a)(o,2),c=i[0],m=i[1],f=r.a.useReducer(fe,[]),h=Object(s.a)(f,2),g=h[0],y=h[1];r.a.useEffect((function(){c.is_login&&(E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",E.a.get("http://localhost:8000/api/v1/current_user/").then((function(e){return e.data})).then((function(e){m({username:e.username,is_login:!0}),function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",e.next=4,E()("http://127.0.0.1:8000/api/v1/project/");case 4:t=e.sent,y({type:"update_project_by_id",payload:{value:t.data}});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()})))}),[]);var v=function(e){if(e.destination){var t=e.destination.droppableId,a=function(e,t,a){var n=Array.from(e);return t>a&&(n=n.map((function(e){return e.priority>=a&&e.priority<=t&&(e.priority=e.priority===t?a:e.priority+1,E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",E.a.patch("http://127.0.0.1:8000/api/v1/task/".concat(e.id,"/"),e).then((function(e){return e.data})).then((function(e){return e})).catch((function(e){return console.log(e)}))),e}))),t<a&&(n=n.map((function(e){return e.priority>=t&&e.priority<=a&&(e.priority=e.priority===t?e.priority=a:e.priority-1,E.a.defaults.headers.common.Authorization="JWT ".concat(localStorage.getItem("token")),E.a.defaults.headers.common["Content-Type"]="application/json",E.a.patch("http://127.0.0.1:8000/api/v1/task/".concat(e.id,"/"),e).then((function(e){return e.data})).then((function(e){return e}))),e}))),n=n.sort((function(e,t){return e.priority>t.priority?1:t.priority>e.priority?-1:0}))}(g.filter((function(e){return e.id==t}))[0].tasks,e.source.index,e.destination.index),n=g.map((function(e){return e.id==t&&(e.tasks=a),e}));y({type:"update_project_by_id",payload:{value:n}})}};return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,null),r.a.createElement(re.a,null,r.a.createElement(ge.Provider,{value:[c,m]},r.a.createElement(k.b,{exact:!0,path:"/",render:function(e){return c.is_login?r.a.createElement(p.a,{maxWidth:"sm"},g&&r.a.createElement(he.Provider,{value:[g,y,a,n]},r.a.createElement(x,null),r.a.createElement(X.a,{onDragEnd:v},r.a.createElement(ne,null)))):r.a.createElement(k.a,{to:{pathname:"/signIn",state:{from:e.location}}})}}),r.a.createElement(k.b,{exact:!0,path:"/signIn"},r.a.createElement(me,null)),r.a.createElement(k.b,{exact:!0,path:"/signUp"},r.a.createElement(pe,null)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[128,1,2]]]);
//# sourceMappingURL=main.b0e601fb.chunk.js.map